(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28f38388"],{2257:function(e,t,o){"use strict";var r=o("e4a7"),i=o.n(r);i.a},"386d":function(e,t,o){"use strict";var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"日期",type:"date",disabled:e.readonly,format:e.formatPattern(),"value-format":e.formatPattern()},on:{change:e.handleChanged},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})},i=[],a=(o("ed08"),{name:"FormDate",components:{},model:{prop:"content",event:"input"},props:{readonly:{type:Boolean},content:{type:String},moduleProp:{type:Object,default:{}}},data:function(){return{}},methods:{formatPattern:function(){var e=this.moduleProp.pattern||"yyyy-MM-dd";return e},handleChanged:function(e){this.$emit("input",e)},validateForm:function(){var e=!1;return this.$refs["itemForm"].validate((function(t){e=t})),e},clearForm:function(){this.itemForm.content=""},i18nName:function(e){return e}}}),n=a,l=o("2877"),s=Object(l["a"])(n,r,i,!1,null,"0942c9b8",null);t["a"]=s.exports},"3e10":function(e,t,o){"use strict";function r(e,t,o,r){var i=void 0!==window.screenLeft?window.screenLeft:screen.left,a=void 0!==window.screenTop?window.screenTop:screen.top,n=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,l=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,s=n/2-o/2+i,p=l/2-r/2+a,u=window.open(e,t,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=yes, copyhistory=no, width="+o+", height="+r+", top="+p+", left="+s);window.focus&&u.focus()}o.d(t,"a",(function(){return r}))},"3f98":function(e,t,o){},"49c8":function(e,t,o){"use strict";var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"输入时间",disabled:e.readonly,"value-format":"HH:mm:ss"},on:{change:e.handleChanged},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})},i=[],a={name:"FormTime",components:{},model:{prop:"content",event:"input"},props:{readonly:{type:Boolean},content:{type:String},moduleProp:{type:Object,default:{}}},data:function(){return{}},methods:{handleChanged:function(e){this.$emit("input",e)},clearForm:function(){}}},n=a,l=o("2877"),s=Object(l["a"])(n,r,i,!1,null,"fb88d3bc",null);t["a"]=s.exports},5876:function(e,t,o){"use strict";var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"example-list-body",staticStyle:{"border-top":"3px solid #d2d6de","border-bottom":"1px solid #d2d6de"}},[o("div",{staticClass:"box"},[o("div",{staticClass:"left"},[o("h3",{staticStyle:{margin:"0px","padding-top":"5px"}},[e._v(e._s(e.childrenModule.showName))])]),o("div",{staticClass:"right"},[e.isModuleCreatable?o("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(t){return e.handleChildrenCreate()}}},[o("span",[e._v("新增")])]):e._e(),e.isModuleUpdatable?o("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(t){return e.handleChildrenUpdate()}}},[o("span",[e._v("修改")])]):e._e(),e.isModuleRemovable?o("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(t){return e.handleChildrenRemove()}}},[o("span",[e._v("删除")])]):e._e()],1)]),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.dataList},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"expand",width:"30"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form",{ref:"ruleForm",staticStyle:{"max-width":"1200px"},attrs:{"label-width":"150px"}},[o("el-row",{attrs:{gutter:0}},[e._l(e.childrenModule.viewProps,(function(r){return[e.isHideInInfo(r.ruleType)||e.isAuditProp(r.ruleType)||e.isSystemProp(r.ruleType)?e._e():o("el-col",{key:r.prop+"_extend",staticStyle:{"padding-right":"5%"},attrs:{xs:24,sm:e.isShowInRow(r)?24:12}},[o("el-form-item",{attrs:{label:r.name}},["IMAGE"===r.feature&&t.row[r.prop]?o("div",[o("a",{attrs:{href:"#"},on:{click:function(o){e.handlePreview(e.getFileUrl(t.row[r.prop],r.ruleType))}}},[o("img",{staticClass:"max_20_20",attrs:{src:e.getFileUrl(t.row[r.prop],r.ruleType)}})])]):"FILE"===r.feature&&t.row[r.prop]?o("div",[o("a",{attrs:{href:e.getFileUrl(t.row[r.prop],r.ruleType),target:"_blank"}},[o("i",{staticClass:"el-icon-document"})])]):o("div",[e._v(e._s(t.row[r.prop]))])])],1)]}))],2),o("el-row",{attrs:{gutter:0}},[e._l(e.childrenModule.viewProps,(function(r){return[e.isAuditProp(r.ruleType)?o("el-col",{key:r.prop+"_extend",attrs:{xs:24,sm:12}},[o("el-form-item",{attrs:{label:r.name}},["IMAGE"===r.feature&&t.row[r.prop]?o("div",[o("a",{attrs:{href:"#"},on:{click:function(o){e.handlePreview(e.getFileUrl(t.row[r.prop],r.ruleType))}}},[o("img",{staticClass:"max_20_20",attrs:{src:e.getFileUrl(t.row[r.prop],r.ruleType)}})])]):"FILE"===r.feature&&t.row[r.prop]?o("div",[o("a",{attrs:{href:e.getFileUrl(t.row[r.prop],r.ruleType),target:"_blank"}},[o("i",{staticClass:"el-icon-document"})])]):o("div",[e._v(e._s(t.row[r.prop]))])])],1):e._e()]}))],2)],1)]}}])}),o("el-table-column",{attrs:{type:"selection",width:"38"}}),e._l(e.childrenModule.viewProps,(function(t){return[e.isHideInList(t.ruleType)?e._e():o("el-table-column",{key:t.prop+"_children_column",attrs:{label:t.name,prop:t.prop,"min-width":e.columnMinWidth(t.maxLength),sortable:""},scopedSlots:e._u([{key:"default",fn:function(r){return["IMAGE"===t.feature&&r.row[t.prop]?o("div",[o("a",{attrs:{href:"#"},on:{click:function(o){e.handlePreview(e.getFileUrl(r.row[t.prop],t.ruleType))}}},[o("img",{staticClass:"max_20_20",attrs:{src:e.getFileUrl(r.row[t.prop],t.ruleType)}})])]):"FILE"===t.feature&&r.row[t.prop]?o("div",[o("a",{attrs:{href:e.getFileUrl(r.row[t.prop],t.ruleType),target:"_blank"}},[o("i",{staticClass:"el-icon-document"})])]):o("div",[e._v(e._s(r.row[t.prop]))])]}}],null,!0)})]}))],2),o("div",{staticClass:"crud-pagination"},[o("el-pagination",{attrs:{size:"mini","current-page":e.pageRequest.page,"page-sizes":[10,20,50,100],"page-size":e.pageRequest.size,background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.pageRequest.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),o("el-dialog",{staticClass:"edit-dialog",attrs:{visible:e.dialogOtherFormVisible,"append-to-body":"","close-on-click-modal":!1,width:"80%",title:"新增"+e.childrenModule.showName},on:{"update:visible":function(t){e.dialogOtherFormVisible=t}}},[o("div",{staticClass:"edit-dialog-content"},[o("el-form",{ref:"childrenDataForm",attrs:{model:e.dataForm,rules:e.rules,"label-width":"160px"}},[o("el-row",{attrs:{gutter:0}},e._l(e.childrenModuleProps,(function(t){return o("el-col",{key:t.prop,staticStyle:{"padding-right":"10%"},attrs:{xs:24,sm:e.isShowInRow(t)?24:12}},[e.isHideInForm(t.ruleType)?e._e():[o("el-form-item",{attrs:{label:t.name,prop:t.prop}},["STRING"===t.feature?o("el-input",{attrs:{moduleProp:t,autocomplete:"off"},model:{value:e.dataForm[t.prop],callback:function(o){e.$set(e.dataForm,t.prop,o)},expression:"dataForm[prop.prop]"}}):"PASSWORD"===t.feature?o("el-input",{attrs:{moduleProp:t,"show-password":"",autocomplete:"off"},model:{value:e.dataForm[t.prop],callback:function(o){e.$set(e.dataForm,t.prop,o)},expression:"dataForm[prop.prop]"}}):"NUMBER"===t.feature?o("el-input",{attrs:{type:"number",moduleProp:t,autocomplete:"off"},model:{value:e.dataForm[t.prop],callback:function(o){e.$set(e.dataForm,t.prop,o)},expression:"dataForm[prop.prop]"}}):"TEXT"===t.feature?o("FormText",{attrs:{moduleProp:t},model:{value:e.dataForm[t.prop],callback:function(o){e.$set(e.dataForm,t.prop,o)},expression:"dataForm[prop.prop]"}}):"DATE"===t.feature?o("FormDate",{attrs:{moduleProp:t},model:{value:e.dataForm[t.prop],callback:function(o){e.$set(e.dataForm,t.prop,o)},expression:"dataForm[prop.prop]"}}):"DATETIME"===t.feature?o("FormDateTime",{attrs:{moduleProp:t},model:{value:e.dataForm[t.prop],callback:function(o){e.$set(e.dataForm,t.prop,o)},expression:"dataForm[prop.prop]"}}):"TIME"===t.feature?o("FormTime",{attrs:{moduleProp:t},model:{value:e.dataForm[t.prop],callback:function(o){e.$set(e.dataForm,t.prop,o)},expression:"dataForm[prop.prop]"}}):"SELECT"===t.feature?o("FormSelect",{attrs:{moduleProp:t},model:{value:e.dataForm[t.prop],callback:function(o){e.$set(e.dataForm,t.prop,o)},expression:"dataForm[prop.prop]"}}):"FK"===t.feature?o("FormFK",{attrs:{moduleProp:t,showValue:e.dataForm[t.showPath],readonly:t.prop===e.refModuleProp.prop},on:{handleBack:function(t,o){Object.keys(t).forEach((function(r){var i=t[r];e.$set(e.dataForm,i,o[r])}))}},model:{value:e.dataForm[t.prop],callback:function(o){e.$set(e.dataForm,t.prop,o)},expression:"dataForm[prop.prop]"}}):"FILE"===t.feature||"IMAGE"===t.feature?o("FormFile",{attrs:{moduleProp:t,showUri:e.dataForm[t.prop]},model:{value:e.dataForm[t.prop],callback:function(o){e.$set(e.dataForm,t.prop,o)},expression:"dataForm[prop.prop]"}}):"EDITOR"===t.feature?o("FormEditor",{attrs:{moduleProp:t},model:{value:e.dataForm[t.prop],callback:function(o){e.$set(e.dataForm,t.prop,o)},expression:"dataForm[prop.prop]"}}):e._e()],1)]],2)})),1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.handleChildrenSave}},[e._v("保存")]),o("el-button",{attrs:{type:"success"},on:{click:function(t){e.dialogOtherFormVisible=!1}}},[e._v("取消")])],1)]),o("el-dialog",{staticClass:"edit-dialog",attrs:{visible:e.dialogOtherEditVisible,"append-to-body":"","close-on-click-modal":!1,width:"80%",title:"修改"+e.childrenModule.showName},on:{"update:visible":function(t){e.dialogOtherEditVisible=t}}},[o("div",{staticClass:"edit-dialog-content"},[o("el-form",{ref:"childrenDataEditForm",attrs:{model:e.dataEditForm,rules:e.rules,"label-width":"160px"}},[o("el-row",{attrs:{gutter:0}},e._l(e.childrenModuleProps,(function(t){return o("el-col",{key:t.prop,staticStyle:{"padding-right":"10%"},attrs:{xs:24,sm:e.isShowInRow(t)?24:12}},[e.isHideInEdit(t.ruleType)?e._e():[o("el-form-item",{attrs:{label:t.name,prop:t.prop}},["STRING"===t.feature?o("el-input",{attrs:{moduleProp:t,autocomplete:"off"},model:{value:e.dataEditForm[t.prop],callback:function(o){e.$set(e.dataEditForm,t.prop,o)},expression:"dataEditForm[prop.prop]"}}):"PASSWORD"===t.feature?o("el-input",{attrs:{moduleProp:t,"show-password":"",autocomplete:"off"},model:{value:e.dataEditForm[t.prop],callback:function(o){e.$set(e.dataEditForm,t.prop,o)},expression:"dataEditForm[prop.prop]"}}):"NUMBER"===t.feature?o("el-input",{attrs:{type:"number",moduleProp:t,autocomplete:"off"},model:{value:e.dataEditForm[t.prop],callback:function(o){e.$set(e.dataEditForm,t.prop,o)},expression:"dataEditForm[prop.prop]"}}):"TEXT"===t.feature?o("FormText",{attrs:{moduleProp:t},model:{value:e.dataEditForm[t.prop],callback:function(o){e.$set(e.dataEditForm,t.prop,o)},expression:"dataEditForm[prop.prop]"}}):"DATE"===t.feature?o("FormDate",{attrs:{moduleProp:t},model:{value:e.dataEditForm[t.prop],callback:function(o){e.$set(e.dataEditForm,t.prop,o)},expression:"dataEditForm[prop.prop]"}}):"DATETIME"===t.feature?o("FormDateTime",{attrs:{moduleProp:t},model:{value:e.dataEditForm[t.prop],callback:function(o){e.$set(e.dataEditForm,t.prop,o)},expression:"dataEditForm[prop.prop]"}}):"TIME"===t.feature?o("FormTime",{attrs:{moduleProp:t},model:{value:e.dataEditForm[t.prop],callback:function(o){e.$set(e.dataEditForm,t.prop,o)},expression:"dataEditForm[prop.prop]"}}):"SELECT"===t.feature?o("FormSelect",{attrs:{moduleProp:t,showValue:e.dataEditForm[t.prop]},model:{value:e.dataEditForm[t.prop],callback:function(o){e.$set(e.dataEditForm,t.prop,o)},expression:"dataEditForm[prop.prop]"}}):"FK"===t.feature?o("FormFK",{attrs:{moduleProp:t,showValue:e.dataEditForm[t.showPath],readonly:t.prop===e.refModuleProp.prop||e.isNoUpdate(t.ruleType)},on:{handleBack:function(t,o){Object.keys(t).forEach((function(r){var i=t[r];e.$set(e.dataEditForm,i,o[r])}))}},model:{value:e.dataEditForm[t.prop],callback:function(o){e.$set(e.dataEditForm,t.prop,o)},expression:"dataEditForm[prop.prop]"}}):"FILE"===t.feature||"IMAGE"===t.feature?o("FormFile",{attrs:{moduleProp:t,showUri:e.dataEditForm[t.prop]},model:{value:e.dataEditForm[t.prop],callback:function(o){e.$set(e.dataEditForm,t.prop,o)},expression:"dataEditForm[prop.prop]"}}):"EDITOR"===t.feature?o("FormEditor",{attrs:{moduleProp:t},model:{value:e.dataEditForm[t.prop],callback:function(o){e.$set(e.dataEditForm,t.prop,o)},expression:"dataEditForm[prop.prop]"}}):e._e()],1)]],2)})),1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.handleChildrenEditSave}},[e._v("保存")]),o("el-button",{attrs:{type:"success"},on:{click:function(t){e.dialogOtherEditVisible=!1}}},[e._v("取消")])],1)]),o("el-dialog",{staticClass:"edit-dialog",attrs:{visible:e.dialogOtherVisible,"append-to-body":"","close-on-click-modal":!1,width:"80%",title:"新增"+e.otherModule.showName},on:{"update:visible":function(t){e.dialogOtherVisible=t}}},[o("div",{staticClass:"edit-dialog-search"},[o("el-form",{attrs:{inline:!0}},[e._l(e.otherModule.filterProps,(function(t){return[o("el-form-item",{key:t.prop,attrs:{label:t.name}},[o("FilterItem",{attrs:{filterProp:t},model:{value:t.value,callback:function(o){e.$set(t,"value",o)},expression:"filterProp.value"}})],1),o("el-form-item",{key:"search-btn_"+t.prop},[o("el-button",{attrs:{type:"primary",plain:""},on:{click:e.handleOtherSearch}},[e._v("查询")])],1)]}))],2)],1),o("div",{staticClass:"edit-dialog-content",staticStyle:{"border-top":"3px solid #d2d6de","border-bottom":"1px solid #d2d6de"}},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.otherListLoading,expression:"otherListLoading"}],ref:"refOtherModuleTable",staticStyle:{width:"100%"},attrs:{data:e.otherDataList,"highlight-current-row":""},on:{"selection-change":e.handleOtherListSelectionChange}},[o("el-table-column",{attrs:{type:"expand",width:"30"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form",{ref:"ruleForm",staticStyle:{"max-width":"800px"},attrs:{"label-width":"150px"}},[o("el-row",{attrs:{gutter:0}},[e._l(e.otherModule.viewProps,(function(r){return[e.isHideInInfo(r.ruleType)?e._e():o("el-col",{key:r.prop+"_dialog",attrs:{xs:24,sm:12}},[o("el-form-item",{attrs:{label:r.name}},[o("div",{staticStyle:{"margin-right":"15px"}},[e._v(" "+e._s(t.row[r.prop])+" ")])])],1)]}))],2)],1)]}}])}),o("el-table-column",{attrs:{type:"selection",width:"38"}}),e._l(e.otherModule.viewProps,(function(t){return[e.isHideInList(t.ruleType)?e._e():o("el-table-column",{key:t.prop+"_childrenEdit_column",attrs:{label:t.name,prop:t.prop,"min-width":e.columnMinWidth(t.maxLength),sortable:""},scopedSlots:e._u([{key:"default",fn:function(o){return[e._v(" "+e._s(o.row[t.prop])+" ")]}}],null,!0)})]}))],2),o("div",{staticClass:"crud-pagination"},[o("el-pagination",{attrs:{"current-page":e.otherPageRequest.page,"page-sizes":[10,20,50,100],"page-size":e.otherPageRequest.size,background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.otherPageRequest.total},on:{"size-change":e.handleOtherSizeChange,"current-change":e.handleOtherCurrentChange}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.handleOtherListSave}},[e._v("保存")]),o("el-button",{attrs:{type:"danger"},on:{click:e.handleOtherListRefresh}},[e._v("刷新")]),o("el-button",{attrs:{type:"success"},on:{click:function(t){e.dialogOtherVisible=!1}}},[e._v("取消")])],1)])],1)},i=[],a=(o("4de4"),o("7db0"),o("4160"),o("d81d"),o("b0c0"),o("8a79"),o("159b"),o("5530")),n=o("2f62"),l=o("dbb4a"),s=o("5f32"),p=o("386d"),u=o("76e9"),d=o("c0ab"),c=o("49c8"),h=o("8f3e"),f=o("88b9"),m=o("a6ea"),g=o("cb41"),v=o("3e10"),b=o("1e3b"),y={name:"Children",components:{FilterItem:g["a"],FormString:l["a"],FormText:s["a"],FormDate:p["a"],FormFK:f["a"],FormDateTime:d["a"],FormTime:c["a"],FormSelect:h["a"],FormFile:m["a"],FormEditor:u["a"]},props:{parent:{type:Object,default:function(){}},module:{type:Object,required:!0,default:function(){}}},data:function(){return{data:{},refModuleProp:{},rules:this.getFormRules(),dataInit:{},dataForm:{},dataList:[],pageRequest:{page:0,size:10,total:0},loading:!1,childrenModule:{viewProps:[]},dataListSelection:[],dialogOtherFormVisible:!1,childrenModuleProps:[],dialogOtherEditVisible:!1,dataEditForm:{},dialogOtherVisible:!1,otherModule:{},otherDataList:[],otherListSelection:[],otherListLoading:!1,otherPageRequest:{page:0,size:10,total:0}}},watch:{},created:function(){},computed:Object(a["a"])(Object(a["a"])({},Object(n["b"])(["fileHttpServer"])),{},{isModuleCreatable:function(){return this.hasPermission(this.childrenModule,"CREATE")&&this.hasPermission(this.parent,"CREATE")},isModuleUpdatable:function(){return this.hasPermission(this.childrenModule,"UPDATE")&&this.hasPermission(this.parent,"UPDATE")},isModuleRemovable:function(){return this.hasPermission(this.childrenModule,"DELETE")&&this.hasPermission(this.parent,"DELETE")}}),methods:{initialize:function(e,t){this.data=e,this.refModuleProp=this.module.props.filter((function(e){return e.prop===t}))[0],this.getChildrenData(e)},hasPermission:function(e,t){var o=e&&e.actions||[],r=o.filter((function(e){return e.act===t})).length;if(r>0)return!0},getChildrenData:function(e){var t=this;if(!this.loading){e=e||this.data,this.loading=!0;var o={};this.dataInit={},o[this.refModuleProp.prop]=e[this.refModuleProp.refProp],o._page=this.pageRequest.page?this.pageRequest.page-1:0,o._size=this.pageRequest.size||10,Object(b["e"])(this.module.name,o).then((function(e){var o=e.data;t.dataList=o.content,t.pageRequest=Object.assign(o.pageable,{total:o.totalElements,page:o.number+1,size:o.size});var r=t.refModuleProp.prop,i=(t.refModuleProp.refProp,r+"."+t.refModuleProp.showProp);t.dataForm[r]=t.data[t.refModuleProp.refProp],t.dataForm[i]=t.data[t.refModuleProp.showProp],t.dataInit[r]=t.data[t.refModuleProp.refProp],t.dataInit[i]=t.data[t.refModuleProp.showProp],t.childrenModule=e.module,t.childrenModuleProps=e.module.props||[],setTimeout((function(){t.loading=!1}),200)})).catch((function(){t.loading=!1}))}},handleSelectionChange:function(e){this.dataListSelection=e},handleSizeChange:function(e){this.pageRequest.size=e,this.getChildrenData(this.data)},handleCurrentChange:function(e){this.pageRequest.page=e,this.getChildrenData(this.data)},handleOtherSearch:function(){this.getOtherList()},handleOtherListSelectionChange:function(e){this.otherListSelection=e},getViewFilters:function(){var e=[];return this.otherModule.name&&this.otherModule.filterProps&&this.otherModule.filterProps.forEach((function(t){var o={prop:t.prop,op:t.op?t.op:"=",value:t.value};e.push(o)})),e},getSubFilters:function(e,t,o){var r={prop:o.refProp,op:"not in",subQuery:{module:this.childrenModule.name,prop:t,filters:[{prop:e,op:"=",value:this.data[this.refModuleProp.refProp]}]}};return[r]},handleChildrenCreate:function(){var e=this,t=this.module.otherRefProps||[];if(1!==t.length)this.dialogOtherFormVisible=!0,this.dataForm=Object(a["a"])({},this.dataInit);else{var o=this.module.props||[],r=o.filter((function(t){return!t.refModuleName&&!e.isHideInEdit(t.prop)})).length;r>1?(this.dialogOtherFormVisible=!0,this.dataForm=Object(a["a"])({},this.dataInit)):(this.dialogOtherVisible=!0,this.getOtherList())}},handleChildrenUpdate:function(){this.dataListSelection.length<=0?this.$alert("请选择一行待修改的记录","警告",{confirmButtonText:"确认"}):(this.dialogOtherEditVisible=!0,this.dataEditForm=this.dataListSelection[0])},getFormRules:function(){var e={};return this.module.props.forEach((function(t){Object(b["t"])(t.ruleType)&&(e[t.prop]=[{required:!0,message:"必输项",trigger:"change"}])})),e},handleChildrenSave:function(){var e=this;this.$refs["childrenDataForm"].validate((function(t){if(!t)return e.$message({type:"error",message:"数据验证失败，请检查输入项"}),console.log("error submit!!"),!1;var o=e.dataForm;Object(b["c"])(e.module.name,o).then((function(t){e.dialogOtherFormVisible=!1,e.getChildrenData(e.data)})).catch((function(){}))}))},handleChildrenEditSave:function(){var e=this;this.$refs["childrenDataEditForm"].validate((function(t){if(!t)return e.$message({type:"error",message:"数据验证失败，请检查输入项"}),console.log("error submit!!"),!1;var o={};e.childrenModuleProps.forEach((function(t){e.isHideInEdit(t.ruleType)&&!e.isID(t.ruleType)||(o[t.prop]=e.dataEditForm[t.prop])})),Object(b["z"])(e.module.name,o).then((function(t){e.dialogOtherEditVisible=!1,e.getChildrenData(e.data)})).catch((function(){}))}))},handleChildrenReset:function(){this.$refs["childrenDataForm"].resetFields()},getOtherList:function(){var e=this;if(!this.otherListLoading&&this.module.otherRefProps&&this.module.otherRefProps.length>0){this.otherListLoading=!0;var t=this.module.refProp,o={_vf:JSON.stringify(this.getViewFilters())},r=this.module.otherRefProps[0],i=this.childrenModule.props.find((function(e){return e.prop===r}));o["_sf"]=JSON.stringify(this.getSubFilters(t,r,i)),o._page=this.otherPageRequest.page?this.otherPageRequest.page-1:0,o._size=this.otherPageRequest.size||10,Object(b["e"])(i.refModuleName,o).then((function(t){var o=t.data;e.otherDataList=o.content,e.otherPageRequest=Object.assign(o.pageable,{total:o.totalElements,page:o.number+1,size:o.size});var r=e.otherModule.filterProps;e.otherModule=t.module,r&&r.length>0&&(e.otherModule.filterProps=r),setTimeout((function(){e.otherListLoading=!1}),200)})).catch((function(){e.otherListLoading=!1}))}},handleOtherListSave:function(){var e=this;if(this.otherListSelection.length<=0)this.$alert("请先勾选要保存的记录","警告",{confirmButtonText:"确认"});else{var t=this.module.refProp,o=this.module.otherRefProps[0],r=this.childrenModule.props.find((function(e){return e.prop===o})),i=[],a={module:this.childrenModule.name,data:[]};this.otherListSelection.forEach((function(i){var n={};n[t]=e.data[e.refModuleProp.refProp],n[o]=i[r.refProp],a.data.push(n)})),i.push(a);var n={_data:JSON.stringify(i)};Object(b["c"])(this.module.name,n).then((function(t){e.getChildrenData(e.data),e.dialogOtherVisible=!1})).catch((function(){}))}},handleOtherListRefresh:function(){this.getOtherList()},handleChildrenRemove:function(){var e=this;this.dataListSelection.length<=0?this.$alert("请选择待删除的记录","警告",{confirmButtonText:"确认"}):this.$confirm("确认要删除吗？","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"警告"}).then((function(){var t={id:e.dataListSelection.map((function(t){return t[e.childrenModule.pk]}))};Object(b["x"])(e.childrenModule.name,t).then((function(t){e.getChildrenData(e.data),e.$message({type:"success",message:"删除操作执行完成"})})).catch((function(e){}))})).catch((function(){e.$message({type:"info",message:"删除已取消"})}))},getDataListSelection:function(){return this.dataListSelection},handleOtherSizeChange:function(e){this.otherPageRequest.size=e,this.getOtherList()},handleOtherCurrentChange:function(e){this.otherPageRequest.page=e,this.getOtherList()},isHideInList:function(e){return Object(b["o"])(e)},getFileUrl:function(e,t){if(this.isAbsoluteFile(t))return e;var o=this.fileHttpServer+"";return o.endsWith("/")&&(o=o.substring(0,o.length-1)),o+e},handlePreview:function(e){e&&Object(v["a"])(e,"图片预览",600,600)},columnMinWidth:b["b"],isHideInForm:b["m"],isHideInEdit:b["l"],isHideInInfo:b["n"],isAuditProp:b["k"],isShowInRow:b["u"],isID:b["p"],isSystemProp:b["v"],isNoUpdate:b["s"],isAbsoluteFile:b["j"]}},w=y,P=(o("eb96"),o("fd5d"),o("2877")),F=Object(P["a"])(w,r,i,!1,null,"4a1585da",null);t["a"]=F.exports},"5f32":function(e,t,o){"use strict";var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:8,autosize:"",autocomplete:"off",disabled:e.readonly,maxlength:e.moduleProp.length>0?e.moduleProp.length:200},on:{blur:function(t){return e.$emit("input",t.target.value)}},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)},i=[],a={name:"FormText",components:{},model:{prop:"content",event:"input"},props:{readonly:{type:Boolean},content:{type:String},moduleProp:{type:Object,default:{}}},data:function(){return{contentText:this.content}},computed:{contentShortLength:function(){return this.content&&this.content.length||0}},methods:{clearForm:function(){this.content=""}}},n=a,l=(o("d87a"),o("2877")),s=Object(l["a"])(n,r,i,!1,null,"279e0544",null);t["a"]=s.exports},6100:function(e,t,o){},"6bcb":function(e,t,o){"use strict";var r=o("e85a"),i=o.n(r);i.a},"76e9":function(e,t,o){"use strict";var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"editor-container"},[o("Tinymce",{ref:"tinymce",attrs:{height:200,action:e.uploadAction},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)},i=[],a=(o("ac1f"),o("1276"),o("8256")),n=(o("2f62"),o("1e3b")),l={name:"FormEditor",components:{Tinymce:a["a"]},model:{prop:"content",event:"input"},props:{content:{type:String},moduleProp:{type:Object,default:{}}},data:function(){return{uploadAction:"http://localhost:8080/editor/image.json?module="+this.$route.path.split("/")[1]}},created:function(){this.uploadAction=this.getUploadUrl()},computed:{newValue:function(){return this.content}},watch:{newValue:function(e,t){this.$emit("input",e)}},methods:{getUploadUrl:function(){var e=Object(n["g"])()+"?module=";return e+=this.$route.path.split("/")[1],e},clearForm:function(){this.content="";var e=this.$refs.tinymce.tinymceId;window.tinymce.get(e).setContent("")}}},s=l,p=o("2877"),u=Object(p["a"])(s,r,i,!1,null,"7df0b34e",null);t["a"]=u.exports},7788:function(e,t,o){},"7d8f":function(e,t,o){},"7db0":function(e,t,o){"use strict";var r=o("23e7"),i=o("b727").find,a=o("44d2"),n=o("ae40"),l="find",s=!0,p=n(l);l in[]&&Array(1)[l]((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!p},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a(l)},"88b9":function(e,t,o){"use strict";var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"example-fk-search"},[o("el-input",{key:"fk_key_"+e.moduleProp.showPath,staticStyle:{height:"32.8px!important"},attrs:{placeholder:"请输入",value:e.getContent(),readonly:"readonly"},on:{blur:e.handleBlur}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search",disabled:e.readonly},on:{click:e.handleSearchDialog},slot:"append"})],1),o("el-dialog",{staticClass:"fk-dialog",attrs:{visible:e.dialogSearchVisible,"append-to-body":"","close-on-click-modal":!1,width:"88%",title:"查找"+e.refModule.showName},on:{"update:visible":function(t){e.dialogSearchVisible=t}}},[o("div",{staticClass:"fk-dialog-search"},[o("el-form",{attrs:{inline:!0}},[e._l(e.filterProps||[],(function(t,r){return[o("el-form-item",{key:"fk-filter-"+t.prop+"_"+r,staticStyle:{"text-align":"right"},attrs:{label:t.name,"label-width":"88px"}},[o("FilterItem",{attrs:{filterProp:t},on:{handleOp:function(e){t.op=e}},model:{value:t.value,callback:function(o){e.$set(t,"value",o)},expression:"filterProp.value"}})],1)]})),o("el-form-item",{key:"home-search-btn"},[o("el-button",{attrs:{type:"primary",plain:""},on:{click:e.handleSearch}},[e._v("查询")])],1)],2)],1),o("div",{staticClass:"fk-dialog-content",staticStyle:{"border-top":"3px solid #d2d6de","border-bottom":"1px solid #d2d6de"}},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"refModuleTable",staticStyle:{width:"100%"},attrs:{data:e.dataList,"highlight-current-row":""},on:{"selection-change":e.handleSelectionChange,"current-change":e.handleCurrentRowChange}},[o("el-table-column",{attrs:{type:"expand",width:"30"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form",{ref:"ruleForm",attrs:{"label-width":"150px"}},[o("el-row",{attrs:{gutter:0}},e._l(e.refModule.viewProps,(function(r){return o("el-col",{key:r.prop+"_extend",attrs:{xs:24,sm:12}},[o("el-form-item",{attrs:{label:r.name}},["IMAGE"===r.feature&&t.row[r.prop]?o("div",[o("a",{attrs:{href:"#"},on:{click:function(o){e.handlePreview(e.getFileUrl(t.row[r.prop]),r.ruleType)}}},[o("img",{staticClass:"max_20_20",attrs:{src:e.getFileUrl(t.row[r.prop],r.ruleType)}})])]):"FILE"===r.feature&&t.row[r.prop]?o("div",[o("i",{staticClass:"el-icon-document"})]):o("div",[e._v(e._s(t.row[r.prop]))])])],1)})),1)],1)]}}])}),o("el-table-column",{attrs:{type:"selection",width:"38"}}),e._l(e.refModule.viewProps,(function(t){return[e.isHideInList(t.ruleType)?e._e():o("el-table-column",{key:t.prop+"_column",attrs:{label:t.name,prop:t.prop,"min-width":e.columnMinWidth(t.maxLength),sortable:""},scopedSlots:e._u([{key:"default",fn:function(r){return["IMAGE"===t.feature&&r.row[t.prop]?o("div",[o("a",{attrs:{href:"#"},on:{click:function(o){e.handlePreview(e.getFileUrl(r.row[t.prop],t.ruleType))}}},[o("img",{staticClass:"max_20_20",attrs:{src:e.getFileUrl(r.row[t.prop],t.ruleType)}})])]):"FILE"===t.feature&&r.row[t.prop]?o("div",[o("i",{staticClass:"el-icon-document"})]):o("div",[e._v(e._s(r.row[t.prop]))])]}}],null,!0)})]}))],2),o("div",{staticClass:"crud-pagination"},[o("el-pagination",{attrs:{"current-page":e.pageRequest.page,"page-sizes":[10,20,50,100],"page-size":e.pageRequest.size,background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.pageRequest.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.handleSelectedResult}},[e._v("确认")]),o("el-button",{attrs:{type:"danger"},on:{click:e.getList}},[e._v("刷新")]),o("el-button",{attrs:{type:"success"},on:{click:function(t){e.dialogSearchVisible=!1}}},[e._v("取消")])],1)])],1)},i=[],a=(o("4160"),o("a434"),o("b0c0"),o("b64b"),o("d3b7"),o("25f0"),o("8a79"),o("498a"),o("159b"),o("53ca")),n=o("5530"),l=o("2f62"),s=o("cb41"),p=o("3e10"),u=o("1e3b"),d={name:"FormFK",components:{FilterItem:s["a"]},model:{prop:"value",event:"input"},props:{readonly:{type:Boolean},value:{},showValue:{},moduleProp:{type:Object,default:{prop:"",refProp:"",showProp:"",refModuleName:"",showPath:""}},defaultFilters:{type:Array},refreshBeforeShow:{type:Boolean,default:!1}},data:function(){return{content:this.showValue,filterProps:[],refProp:this.moduleProp.refProp,showProp:this.moduleProp.showProp,viewFilter:{prop:"",value:""},refModule:{name:this.moduleProp.refModuleName,props:[],viewProps:[]},dataList:[],loading:!1,dataListSelection:[],dialogSearchVisible:!1,pageRequest:{page:0,size:10,sort:"+id",total:0}}},watch:{showValue:function(e){e&&(this.content=e)}},computed:Object(n["a"])(Object(n["a"])({},Object(l["b"])(["fileHttpServer"])),{},{showContent:function(){return this.content}}),created:function(){Object.keys(this.moduleProp).length>0&&this.getList()},mounted:function(){},methods:{getContent:function(){return this.value||(this.content=""),this.showContent||this.value},handleBlur:function(){var e=this.getContent();e&&""!==e.toString().trim()||this.$emit("input","")},getViewFilters:function(){var e=[];return this.defaultFilters&&this.defaultFilters.forEach((function(t){e.push(t)})),this.filterProps.forEach((function(t){var o=t.value;Object(a["a"])(o)===Array&&(o=o[o.length-1]);var r={prop:t.prop,op:t.op||"=",value:o};e.push(r)})),e},setModuleProp:function(e){this.refProp=e.refProp,this.showProp=e.showProp,this.moduleProp.refProp=e.refProp,this.moduleProp.showProp=e.showProp,this.refModule.name=e.refModuleName},handleSearch:function(){this.pageRequest.page=0,this.getList()},handleSearchDialog:function(){this.dialogSearchVisible=!0,this.pageRequest.page=0,this.refreshBeforeShow&&this.handleSearch()},getList:function(){var e=this;if(!this.loading){this.loading=!0;var t={_vf:JSON.stringify(this.getViewFilters())};t._page=this.pageRequest.page?this.pageRequest.page-1:0,t._size=this.pageRequest.size||10,Object(u["e"])(this.refModule.name,t).then((function(t){var o=t.data;e.dataList=o.content,e.refModule=t.module,e.pageRequest=Object.assign(o.pageable,{total:o.totalElements,page:o.number+1,size:o.size}),0===e.filterProps.length&&(e.filterProps=e.refModule.filterProps),setTimeout((function(){e.loading=!1}),200)})).catch((function(){e.loading=!1}))}},handleSelectionChange:function(e){this.dataListSelection=e},handleCurrentRowChange:function(e){var t=this;this.dataListSelection.forEach((function(e){t.$refs.refModuleTable.toggleRowSelection(e,!1)})),this.dataListSelection.splice(0,this.dataListSelection.length),this.dataListSelection.push(e),this.$refs.refModuleTable.toggleRowSelection(e,!0)},handleSelectedResult:function(){var e=this,t="",o="";this.dataListSelection.forEach((function(r){t+=r[e.refProp]+",",o+=r[e.showProp]+","})),t.endsWith(",")&&(t=t.substring(0,t.length-1),o=o.substring(0,o.length-1)),this.dialogSearchVisible=!1,this.$emit("input",t),this.content=o;var r=this.dataListSelection.length>0?this.dataListSelection[0]:{},i=this.moduleProp.mappings||{};this.$emit("handleBack",i,r),this.getList()},handleSizeChange:function(e){this.pageRequest.size=e,this.getList()},handleCurrentChange:function(e){this.pageRequest.page=e,this.getList()},getFileUrl:function(e,t){if(e){if(Object(u["j"])(t))return e;var o=this.fileHttpServer+"";return o.endsWith("/")&&(o=o.substring(0,o.length-1)),o+e}return"#"},handlePreview:function(e,t){e&&Object(p["a"])(e,"图片预览",600,600)},isHideInList:function(e){return Object(u["o"])(e)},columnMinWidth:u["b"],isAbsoluteFile:u["j"]}},c=d,h=(o("8cc4"),o("2257"),o("2877")),f=Object(h["a"])(c,r,i,!1,null,"8fbc0094",null);t["a"]=f.exports},"8cc4":function(e,t,o){"use strict";var r=o("c937"),i=o.n(r);i.a},"8f3e":function(e,t,o){"use strict";var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-select",{ref:"select",staticStyle:{width:"100%"},attrs:{disabled:e.readonly,clearable:"",placeholder:"请选择"},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.moduleProp.values||{},(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)},i=[],a=(o("7db0"),o("d3b7"),o("25f0"),o("ddb0"),{name:"FormSelect",components:{},model:{prop:"content",event:"input"},props:{readonly:{type:Boolean},moduleProp:{type:Object,default:{}},showValue:{}},data:function(){return{value:this.showValue}},created:function(){this.showValue&&(this.value=this.getValue(this.showValue),this.$emit("input",this.value))},watch:{showValue:function(e){this.value=this.getValue(e),this.$emit("input",this.value),console.log("value="+this.value)}},computed:{},methods:{getValue:function(e){e=e||"";var t=this.moduleProp.values.find((function(t){var o=t.label.toString(),r=t.value.toString();return r===e||o===e})),o=t?t.value:this.moduleProp.defaultValue;return o},handleChange:function(e){this.$emit("input",e)}}}),n=a,l=o("2877"),s=Object(l["a"])(n,r,i,!1,null,"70303236",null);t["a"]=s.exports},9670:function(e,t,o){"use strict";var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"example-list-body",staticStyle:{"border-top":"3px solid #d2d6de","border-bottom":"1px solid #d2d6de"}},[o("div",{staticClass:"box"},[o("div",{staticClass:"left"},[o("h3",{staticStyle:{margin:"0px","padding-top":"5px"}},[e._v(e._s(e.module.showName))])]),o("div",{staticClass:"right"},[o("button",{staticClass:"el-button el-button--default el-button--small is-circle",attrs:{type:"button"},on:{click:function(t){return e.getChildrenData(e.data)}}},[o("i",{staticClass:"el-icon-refresh"})]),o("button",{staticClass:"el-button el-button--default el-button--small is-circle",attrs:{type:"button"},on:{click:function(t){e.dialogViewPropertyVisible=!0}}},[o("i",{staticClass:"el-icon-menu"})])])]),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.dataList},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"expand",width:"30"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form",{ref:"ruleForm",staticStyle:{"max-width":"1200px"},attrs:{"label-width":"150px"}},[o("el-row",{attrs:{gutter:0}},[e._l(e.module.viewProps,(function(r){return[e.isHideInInfo(r.ruleType)?e._e():o("el-col",{key:r.prop+"_extend",attrs:{xs:24,sm:e.isShowInRow(r)?24:12}},[o("el-form-item",{attrs:{label:r.name}},["IMAGE"===r.feature&&t.row[r.prop]?o("div",[o("a",{attrs:{href:"#"},on:{click:function(o){e.handlePreview(e.getFileUrl(t.row[r.prop]))}}},[o("img",{staticClass:"max_20_20",attrs:{src:e.getFileUrl(t.row[r.prop])}})])]):"FILE"===r.feature&&t.row[r.prop]?o("div",[o("a",{attrs:{href:e.getFileUrl(t.row[r.prop]),target:"_blank"}},[o("i",{staticClass:"el-icon-document"})])]):o("div",[e._v(e._s(t.row[r.prop]))])])],1)]}))],2)],1)]}}])}),o("el-table-column",{attrs:{type:"selection",width:"38"}}),e._l(e.module.viewProps,(function(t){return[e.isHideInList(t.ruleType)?e._e():o("el-table-column",{key:t.prop+"_c_column",attrs:{label:t.name,prop:t.prop,"min-width":e.columnMinWidth(t.maxLength),sortable:""},scopedSlots:e._u([{key:"default",fn:function(r){return["IMAGE"===t.feature&&r.row[t.prop]?o("div",[o("a",{attrs:{href:"#"},on:{click:function(o){e.handlePreview(e.getFileUrl(r.row[t.prop]))}}},[o("img",{staticClass:"max_20_20",attrs:{src:e.getFileUrl(r.row[t.prop])}})])]):"FILE"===t.feature&&r.row[t.prop]?o("div",[o("a",{attrs:{href:e.getFileUrl(r.row[t.prop]),target:"_blank"}},[o("i",{staticClass:"el-icon-document"})])]):o("div",[e._v(e._s(r.row[t.prop]))])]}}],null,!0)})]}))],2),o("div",{staticClass:"crud-pagination"},[o("el-pagination",{attrs:{"current-page":e.pageRequest.page,"page-sizes":[10,20,50,100],"page-size":e.pageRequest.size,background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.pageRequest.total}})],1)],1)},i=[],a=(o("b0c0"),o("8a79"),o("5530")),n=o("2f62"),l=o("3e10"),s=o("1e3b"),p={name:"Children",components:{},props:{module:{type:Object,required:!0,default:{}}},data:function(){return{data:{},dataList:[],pageRequest:{page:0,size:10,totalElements:0},loading:!1,dataListSelection:[]}},created:function(){},computed:Object(a["a"])({},Object(n["b"])(["fileHttpServer"])),methods:{getChildrenData:function(e){var t=this;if(!this.loading){this.loading=!0,this.data=e||this.data;var o=Object(a["a"])({},this.data);o._page=this.pageRequest.page?this.pageRequest.page-1:0,o._size=this.pageRequest.size||10,Object(s["e"])(this.module.name,o).then((function(e){var o=e.data;t.dataList=o.content,t.pageRequest=Object.assign(o.pageable,{total:o.totalElements,page:o.number+1,size:o.size}),Object.assign(t.module,e.module),setTimeout((function(){t.loading=!1}),200)})).catch((function(){t.loading=!1}))}},handleSelectionChange:function(e){this.dataListSelection=e},getDataListSelection:function(){return this.dataListSelection},getFileUrl:function(e){var t=this.fileHttpServer+"";return t.endsWith("/")&&(t=t.substring(0,t.length-1)),t+e},handlePreview:function(e){e&&Object(l["a"])(e,"图片预览",600,600)},isHideInList:s["o"],isHideInInfo:s["n"],columnMinWidth:s["b"],isShowInRow:s["u"]}},u=p,d=(o("df43"),o("2877")),c=Object(d["a"])(u,r,i,!1,null,"a9bb3d58",null);t["a"]=c.exports},a549:function(e,t,o){"use strict";var r=o("7d8f"),i=o.n(r);i.a},a6ea:function(e,t,o){"use strict";var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-upload",{key:e.uploadKey,ref:"upload",attrs:{action:e.uploadAction,"list-type":e.listType,"on-success":e.successUpload,"on-preview":e.handlePreview,"on-exceed":e.handleExceed,"on-remove":e.handleRemove,"file-list":e.fileList,"with-credentials":!0,multiple:e.multiple,limit:e.limitSize,disabled:e.readonly,"auto-upload":!0},model:{value:e.showUri,callback:function(t){e.showUri=t},expression:"showUri"}},["picture-card"===e.listType?o("i",{staticClass:"el-icon-plus"}):o("el-button",{attrs:{slot:"trigger",type:"primary"},slot:"trigger"},[e._v("上传文件")])],1)],1)},i=[],a=(o("4160"),o("a15b"),o("d81d"),o("a9e3"),o("ac1f"),o("1276"),o("2ca0"),o("159b"),o("5530")),n=o("2f62"),l=o("3e10"),s=o("1e3b"),p={name:"formText",components:{},model:{prop:"content",event:"input"},props:{readonly:{type:Boolean},showUri:{type:String},isImage:{type:Boolean},moduleProp:{type:Object,default:{}},limitSize:{type:Number,default:1}},data:function(){return{uploadAction:"",listType:this.isImage||"IMAGE"===this.moduleProp.feature?"picture-card":"text",fileList:[],multiple:!1,content:this.showUri,uploadKey:0}},created:function(){this.uploadAction=this.getUploadUrl(),this.fileList=this.getFileList()},watch:{showUri:function(e){this.content=e,this.fileList=e?this.getFileList():[],this.uploadKey++}},computed:Object(a["a"])({},Object(n["b"])(["fileHttpServer"])),methods:{getUploadUrl:function(){var e=Object(s["i"])()+"?module=";return e+=this.$route.path.split("/")[1],e},getFileList:function(){if(this.fileList=[],this.content)for(var e=this.content.split(","),t=0;t<e.length;t++){var o=e[t],r=o.split("/"),i=r[r.length-1],a=o;this.isAbsoluteFile(this.moduleProp.ruleType)||(a=this.fileHttpServer+(o.startsWith("/")?o.substring(1):o)),"IMAGE"===this.moduleProp.feature?this.fileList.push({name:i,url:a,uri:o}):this.fileList.push({name:i,uri:o,url:o}),console.log("###name="+i+", URL="+o)}return this.fileList},setFileList:function(e){var t=this;e.forEach((function(e){t.fileList.push({name:e,uri:e,url:e})})),this.limitSize=10,this.multiple=!0},handlePreview:function(e){var t=e.url;t&&Object(l["a"])(t,"图片预览",600,600)},submitUpload:function(){this.$refs.upload.submit()},successUpload:function(e,t,o){var r=e.map((function(e){return e.uri})).join(","),i=e.map((function(e){return e.url})).join(",");this.fileList.length>0&&(i=this.fileList.map((function(e){return e.url})).join(",")+","+i,r=this.fileList.map((function(e){return e.uri})).join(",")+","+r),this.moduleProp.ruleType&&this.isAbsoluteFile(this.moduleProp.ruleType)?this.$emit("input",i):this.$emit("input",r)},handleExceed:function(e,t){this.$message({type:"success",message:"文件超过上传限制"})},handleRemove:function(e,t){this.fileList=t,this.content=this.fileList.map((function(e){return e.uri})).join(","),this.$emit("input",this.content)},isAbsoluteFile:s["j"]}},u=p,d=o("2877"),c=Object(d["a"])(u,r,i,!1,null,"3aee0456",null);t["a"]=c.exports},c0ab:function(e,t,o){"use strict";var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择日期时间",type:"datetime",disabled:e.readonly,format:e.formatPattern(),"value-format":e.formatPattern()},on:{change:e.handleChanged},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)},i=[],a=(o("ed08"),{name:"FormText",components:{},model:{prop:"content",event:"input"},props:{readonly:{type:Boolean},content:{type:String},moduleProp:{type:Object,default:{}}},data:function(){return{}},methods:{formatPattern:function(){var e=this.moduleProp.pattern||"yyyy-MM-dd HH:mm:ss";return e},handleChanged:function(e){this.$emit("input",e)},clearForm:function(){}}}),n=a,l=o("2877"),s=Object(l["a"])(n,r,i,!1,null,"aa16f466",null);t["a"]=s.exports},c937:function(e,t,o){},cb41:function(e,t,o){"use strict";var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"example-filter-item"},[e.filterProp.selfModule?o("el-cascader",{ref:"tree_"+e.filterProp.prop,staticClass:"filter-minw",attrs:{clearable:"",props:e.getSelfFilterProp(e.filterProp)},on:{change:function(t){return e.handleTreeNodeChange(e.filterProp)}},model:{value:e.filterProp.value,callback:function(t){e.$set(e.filterProp,"value",t)},expression:"filterProp.value"}}):e.filterProp.refLeafModule?o("el-select",{ref:"fk_"+e.filterProp.prop,staticClass:"filter-minw",attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":function(t){e.remoteMethod(e.filterProp,t)},loading:e.loading},on:{change:e.handleFkChange},model:{value:e.filterProp.value,callback:function(t){e.$set(e.filterProp,"value",t)},expression:"filterProp.value"}},e._l(e.filterProp.options||[],(function(t){return o("el-option",{key:t[e.filterProp.refLeaf],attrs:{label:t[e.filterProp.refLeafShow],value:t[e.filterProp.refLeaf]}})})),1):e.filterProp.values?o("el-select",{staticClass:"filter-minw",attrs:{clearable:"",placeholder:"请选择"},on:{change:e.handleChange},model:{value:e.filterProp.value,callback:function(t){e.$set(e.filterProp,"value",t)},expression:"filterProp.value"}},e._l(e.filterProp.values,(function(e){return o("el-option",{key:"_filter"+e.value,attrs:{label:e.label,value:e.value}})})),1):"DATE"===e.filterProp.feature?o("div",{staticStyle:{display:"inline-block"}},[e.filterProp.ops&&e.filterProp.ops.length>1?o("el-select",{staticStyle:{width:"50px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:e.handleOpChange},slot:"prepend",model:{value:e.op,callback:function(t){e.op=t},expression:"op"}},e._l(e.filterProp.ops,(function(e){return o("el-option",{key:"filter_op_"+e.label,attrs:{label:e.label,value:e.value}})})),1):e._e(),o("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"date",align:"right",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","picker-options":e.dateOptions},model:{value:e.filterProp.value,callback:function(t){e.$set(e.filterProp,"value",t)},expression:"filterProp.value"}})],1):"DATETIME"===e.filterProp.feature?o("div",{staticStyle:{display:"inline-block"}},[e.filterProp.ops&&e.filterProp.ops.length>1?o("el-select",{staticStyle:{width:"50px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:e.handleOpChange},slot:"prepend",model:{value:e.op,callback:function(t){e.op=t},expression:"op"}},e._l(e.filterProp.ops,(function(e){return o("el-option",{key:"filter_op_"+e.label,attrs:{label:e.label,value:e.value}})})),1):e._e(),o("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"datetime",align:"right",placeholder:"选择日期",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.datetimeOptions},model:{value:e.filterProp.value,callback:function(t){e.$set(e.filterProp,"value",t)},expression:"filterProp.value"}})],1):o("div",{staticStyle:{display:"inline-block"}},[e.filterProp.ops&&e.filterProp.ops.length>1?o("el-select",{staticStyle:{width:"50px"},attrs:{placeholder:"请选择"},on:{change:e.handleOpChange},model:{value:e.op,callback:function(t){e.op=t},expression:"op"}},e._l(e.filterProp.ops,(function(e){return o("el-option",{key:"filter_op_"+e.label,attrs:{label:e.label,value:e.value}})})),1):e._e(),o("el-input",{style:e.filterProp.ops&&e.filterProp.ops.length>1?"width:150px":"width:200px",attrs:{autocomplete:"off",type:"NUMBER"===e.filterProp.feature?"number":"text"},on:{blur:function(t){return e.handleChange(t.target.value)}},model:{value:e.filterProp.value,callback:function(t){e.$set(e.filterProp,"value",t)},expression:"filterProp.value"}})],1)],1)},i=[],a=(o("d81d"),o("ac1f"),o("1276"),o("5530")),n=o("2f62"),l=o("1e3b"),s={name:"Children",components:{},model:{prop:"value",event:"input"},props:{value:{type:String},filterProp:{type:Object,required:!0,default:{}}},data:function(){return{data:{},loading:!1,op:this.getDefaultOp(),treeProps:{},dateOptions:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]},datetimeOptions:{shortcuts:[{text:"最近一周",onClick:function(e){new Date;var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}},{text:"最近一个月",onClick:function(e){new Date;var t=new Date;t.setTime(t.getTime()-2592e6),e.$emit("pick",t)}},{text:"最近三个月",onClick:function(e){new Date;var t=new Date;t.setTime(t.getTime()-7776e6),e.$emit("pick",t)}}]}}},created:function(){},computed:Object(a["a"])({},Object(n["b"])(["permission"])),mounted:function(){},methods:{getDefaultOp:function(){var e=this.filterProp.ops.length>0?this.filterProp.ops[0].value:"=";return this.handleOpChange(e),e},remoteMethod:function(e,t){var o=this;if(!this.loading){this.loading=!0;var r=e.refLeafModule,i=e.refLeaf,a=e.refLeafShow,n=[i],s={prop:a,op:"rlike",value:t},p=[s],u={_vp:n,_vf:JSON.stringify(p)};Object(l["e"])(r,u).then((function(t){e.options=t.data.content,o.loading=!1})).catch((function(){o.loading=!1}))}},getSelfFilterProp:function(e){var t=e.selfModule,o=e.selfPk,r=e.selfRefProp,i=(e.refLeaf,e.refLeafShow);return this.treeProps={lazy:!0,checkStrictly:!0,lazyLoad:function(e,a){var n=e.value,s={prop:r,op:"=",value:n};n||(s.op="IS NULL");var p=[];p.push(s),Object(l["e"])(t,{_vf:JSON.stringify(p)}).then((function(e){var t=e.data.content||[],r=t.map((function(e){return{value:e[o],label:e[i]}}));a(r)})).catch((function(){}))}},this.treeProps},handleTreeNodeChange:function(e){e.prop.split("."),e.selfPk,e.refLeafShow;var t=this.$refs["tree_"+e.prop].getCheckedNodes(!0),o=(t[0].label,t[0].value);this.$emit("input",o)},handleChange:function(e){this.$emit("input",e),this.$emit("handleOp",this.op)},handleOpChange:function(e){this.$emit("handleOp",this.op)},handleFkChange:function(e){this.$emit("input",e),this.$emit("handleOp",this.op)}}},p=s,u=(o("6bcb"),o("a549"),o("2877")),d=Object(u["a"])(p,r,i,!1,null,"28913621",null);t["a"]=d.exports},d215:function(e,t,o){},d87a:function(e,t,o){"use strict";var r=o("6100"),i=o.n(r);i.a},dbb4a:function(e,t,o){"use strict";var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-input",{attrs:{placeholder:"输入",autocomplete:"off"},on:{blur:function(t){return e.handleChange(t.target.value)}},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})},i=[],a={name:"FormString",components:{},model:{prop:"content",event:"input"},props:{content:{type:String},moduleProp:{type:Object,default:{}},readonly:{type:Boolean}},data:function(){return{}},methods:{handleChange:function(e){this.$emit("input",e)},clearForm:function(){this.content=""}}},n=a,l=o("2877"),s=Object(l["a"])(n,r,i,!1,null,"606aec80",null);t["a"]=s.exports},df43:function(e,t,o){"use strict";var r=o("d215"),i=o.n(r);i.a},e4a7:function(e,t,o){},e85a:function(e,t,o){},eb96:function(e,t,o){"use strict";var r=o("3f98"),i=o.n(r);i.a},fd5d:function(e,t,o){"use strict";var r=o("7788"),i=o.n(r);i.a}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09b148a4"],{2017:function(e,t,o){"use strict";var n=o("cafe"),r=o.n(n);r.a},"9ed6":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login-container pull-height",nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}}},[o("div",{staticClass:"login-border animated fadeInDown"},[o("div",{staticClass:"login-main"},[o("h4",{staticClass:"login-title"},[e._v(e._s(e.title))]),o("userLogin")],1)])])},r=[],i=o("5530"),s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{"status-icon":"",rules:e.loginRules,model:e.loginForm,"label-width":"0"}},[o("el-form-item",{staticStyle:{"margin-bottom":"18px"},attrs:{prop:"username"}},[o("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:"请输入用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}},[o("i",{staticClass:"el-icon-user-solid",attrs:{slot:"prefix"},slot:"prefix"})])],1),o("el-tooltip",{attrs:{content:"Caps lock is On",placement:"right",manual:""},model:{value:e.capsTooltip,callback:function(t){e.capsTooltip=t},expression:"capsTooltip"}},[o("el-form-item",{staticStyle:{"margin-bottom":"18px"},attrs:{prop:"password"}},[o("el-input",{attrs:{size:"small",type:e.passwordType,"auto-complete":"off",placeholder:"请输入密码"},on:{blur:function(t){e.capsTooltip=!1}},nativeOn:{keyup:[function(t){return e.checkCapslock(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}]},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[o("i",{staticClass:"el-icon-view el-input__icon",attrs:{slot:"suffix"},on:{click:e.showPassword},slot:"suffix"}),o("i",{staticClass:"el-icon-key",attrs:{slot:"prefix"},slot:"prefix"})])],1)],1),o("el-form-item",{staticStyle:{display:"none"},attrs:{prop:"code"}},[o("el-row",{attrs:{span:24}},[o("el-col",{attrs:{span:14}},[o("el-input",{attrs:{size:"small","keyup.enter.native":"handleLogin",maxlength:e.code.len,"auto-complete":"off",placeholder:"请输入验证码"},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}},[o("i",{staticClass:"el-icon-unlock",attrs:{slot:"prefix"},slot:"prefix"})])],1),o("el-col",{attrs:{span:10}},[o("div",{staticClass:"login-code"},["text"==e.code.type?o("span",{staticClass:"login-code-img",on:{click:e.refreshCode}},[e._v(" "+e._s(e.code.value)+" ")]):o("img",{staticClass:"login-code-img",attrs:{src:e.code.src},on:{click:e.refreshCode}}),o("i",{staticClass:"icon-shuaxin login-code-icon",on:{click:e.refreshCode}})])])],1)],1),o("el-checkbox",{model:{value:e.loginForm.rememberMe,callback:function(t){e.$set(e.loginForm,"rememberMe",t)},expression:"loginForm.rememberMe"}},[e._v("记住账号")]),o("el-form-item",[o("el-button",{staticClass:"login-submit",attrs:{type:"primary",loading:e.loading,size:"small"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v(" 登录 ")])],1)],1)},a=[],l=(o("99af"),o("61f7"),o("4160"),o("c975"),o("d3b7"),o("ac1f"),o("25f0"),o("5319"),o("159b"),function(e,t){var o="";return o=Math.ceil(1e14*Math.random()).toString().substr(0,e||4),t&&(o+=Date.now()),o}),c=o("2f62"),u=o("a78e"),p=o.n(u),d=o("4360"),m={name:"userlogin",data:function(){var e=this,t=function(e,t,o){t?o():o(new Error("请输入用户名"))},o=function(t,o,n){e.code.value!=o?(e.loginForm.code="",e.refreshCode(),n(new Error("请输入正确的验证码"))):n()};return{loading:!1,redirect:this.$route.query.redirect,loginForm:{username:"",password:"",rememberMe:!1,code:"",redomStr:""},code:{src:"",value:"",len:4,type:"text"},loginRules:{username:[{required:!0,trigger:"blur",validator:t}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度最少为6位字符",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:4,max:4,message:"验证码长度为4位",trigger:"blur"},{required:!0,trigger:"blur",validator:o}]},passwordType:"password",capsTooltip:!1}},created:function(){this.refreshCode(),this.$route.query.redirect||this.getAppInfo()},mounted:function(){},computed:Object(i["a"])({},Object(c["b"])(["appName","appLogo"])),props:[],methods:{refreshCode:function(){this.loginForm.redomStr=l(this.code.len,!0),"text"==this.code.type?this.code.value=l(this.code.len):this.code.src="".concat(this.codeUrl,"/").concat(this.loginForm.redomStr),this.loginForm.code=this.code.value},getAppInfo:function(){var e=this;d["a"].dispatch("app/getAppInfo").then((function(t){console.log("login::"+e.appName)}))},showPassword:function(){""==this.passwordType?this.passwordType="password":this.passwordType=""},checkCapslock:function(e){var t=e.key;this.capsTooltip=t&&1===t.length&&t>="A"&&t<="Z"},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return e.$message({type:"error",message:"请检查输入项"}),!1;e.loading=!0,e.$store.dispatch("user/login",e.loginForm).then((function(){e.loading=!1,e.$router.push({path:e.redirect||"/",query:e.otherQuery})})).catch((function(t){e.loading=!1}))}))}}},f=m,g=(o("ac7e"),o("2877")),h=Object(g["a"])(f,s,a,!1,null,null,null),b=h.exports,k=(o("1e3b"),{name:"login",components:{userLogin:b},data:function(){return{title:p.a.get("appname")||"绣花针微框架"}},watch:{$route:function(){}},created:function(){},mounted:function(){},computed:Object(i["a"])({},Object(c["b"])(["appName","appLogo"])),props:[],methods:{}}),v=k,y=(o("2017"),Object(g["a"])(v,n,r,!1,null,null,null));t["default"]=y.exports},ac7e:function(e,t,o){"use strict";var n=o("b3c3"),r=o.n(n);r.a},b3c3:function(e,t,o){},cafe:function(e,t,o){}}]);